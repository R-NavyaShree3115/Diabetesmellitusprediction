<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CareConnect - Patient Dashboard</title>
<link rel="stylesheet" href="{{ url_for('static', filename='premium.css') }}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
</head>
<body>
<header class="header">
    <div class="logo"><i class="fa-solid fa-heartbeat"></i> CareConnect</div>
    <nav>
        <ul>
            <li><a href="{{ url_for('home') }}"><i class="fa-solid fa-house"></i> Home</a></li>
            <li><a href="{{ url_for('dashboard') }}" class="active"><i class="fa-solid fa-chart-line"></i> Dashboard</a></li>
            <li><a href="{{ url_for('healthplan') }}"><i class="fa-solid fa-bowl-food"></i> Health Plan</a></li>
            <li><a href="{{ url_for('progress') }}"><i class="fa-solid fa-chart-pie"></i> Progress</a></li>
            <li><a href="{{ url_for('doctorconnect') }}"><i class="fa-solid fa-user-doctor"></i> Doctor Connect</a></li>
            <li><a href="{{ url_for('logout') }}"><i class="fa-solid fa-right-from-bracket"></i> Logout</a></li>
        </ul>
    </nav>
</header>

<main class="container">
    <h1 class="page-title">Welcome, <span id="userName">Patient</span> ðŸ‘‹</h1>

    <div class="dashboard-grid-1">
        <section class="card summary-card">
            <h2><i class="fa-solid fa-notes-medical"></i> Health Summary</h2>
            <div id="risk-status">Loading your prediction data...</div>
            <div class="progress-bar"><div id="progress" class="progress-fill"></div></div>
            <div id="risk-advice"></div>
        </section>

   <section class="card quick-links-card">
  <div class="quick-links-header">
    <h2><i class="fa-solid fa-link"></i> Quick Actions</h2>

    <div class="quick-links">
      <a href="{{ url_for('premium') }}" class="quick-link-card">
        <button><i class="fa-solid fa-user-plus"></i> <span>New Prediction</span></button>
      </a>
      <a href="{{ url_for('healthplan') }}" class="quick-link-card">
        <button><i class="fa-solid fa-bowl-food"></i> <span>Health Plan</span></button>
      </a>
      <a href="{{ url_for('doctorconnect') }}" class="quick-link-card">
        <button><i class="fa-solid fa-user-doctor"></i> <span>Consult Doctor</span></button>
      </a>
    </div>
  </div>
</section>

    <div class="dashboard-grid-2">
        <section class="card charts-card">
            <h2><i class="fa-solid fa-chart-bar"></i> Visual Insights</h2>
            <div class="chart-grid">
                <div class="chart-container"><canvas id="glucoseChart"></canvas></div>
                <div class="chart-container"><canvas id="adherenceChart"></canvas></div>
            </div>
        </section>

        <section class="card history-card">
            <h2><i class="fa-solid fa-clock-rotate-left"></i> Prediction History</h2>
            <div id="prediction-history">Loading...</div>
        </section>
    </div>

  
    <div class="dashboard-grid-3">
        <section class="card recommendations-card">
            <h2><i class="fa-solid fa-lightbulb"></i> Recommendations</h2>
            <div id="recommendations">Loading recommendations...</div>
        </section>

        <section class="card progress-link-card">
            <h2><i class="fa-solid fa-chart-pie"></i> Your Progress</h2>
            <p>Track your health metrics and improvements over time.</p>
            <a href="{{ url_for('progress') }}" class="btn btn-progress">View Progress</a>
        </section>
    </div>

</main>

<footer>
    <p>&copy; 2025 CareConnect | Stay Healthy, Stay Safe</p>
</footer>

<script src="{{ url_for('static', filename='premium.js') }}"></script>
<script>
    // Example: Set user's name dynamically from session
    document.addEventListener("DOMContentLoaded", () => {
        const userName = sessionStorage.getItem('userName') || 'Patient';
        document.getElementById('userName').innerText = userName;

        // Lock health plan for non-premium users (from original JS logic)
        const isPremium = sessionStorage.getItem('isPremium') === 'true';
        const healthLink = document.getElementById('healthPlan');
        const doctorLink = document.getElementById('doctorConnect');
        if (healthLink && doctorLink && !isPremium) {
            healthLink.classList.add('quick-link-card-locked');
            healthLink.removeAttribute('href');
            healthLink.querySelector('span').innerText = "Premium Only";
        }
    });
</script>
</body>
</html>