<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CareConnect - Patient Dashboard</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<link rel="stylesheet" href="{{ url_for('static', filename='premium.css') }}">
</head>
<style>
       .quick-btn:hover {
        background-color: #005ea0;
        box-shadow: 0 4px 8px rgba(0, 120, 215, 0.3);
    }
    @media (min-width: 640px) {
        .quick-btn {
            width: 30%;
        }
    }

    /* Metrics Grid */
    .metrics-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
    }
    .metric-card {
        text-align: center;
        padding: 20px;
        background-color: #f7f9fc;
        border-radius: 10px;
        border: 1px solid #e1e8ed;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03);
    }
    .metric-card i {
        font-size: 2.5rem;
        margin-bottom: 10px;
    }
    .text-green { color: #2ecc71; }
    .text-blue { color: #3498db; }
    .text-orange { color: #f39c12; }
    .metric-value {
        font-size: 2.5rem;
        font-weight: 800;
        color: #333;
        line-height: 1;
    }
    .metric-value .unit {
        font-size: 1rem;
        font-weight: 500;
        color: #777;
        margin-left: 5px;
    }
    .metric-trend {
        font-size: 0.9rem;
        margin-top: 10px;
        padding: 5px 10px;
        border-radius: 5px;
    }
    .low-risk { background-color: #e8f9e8; color: #27ae60; }
    .moderate-risk { background-color: #fcf8e3; color: #d35400; }
    .stable { background-color: #e9eff5; color: #5c7f9e; }

    /* Reminders List */
    .reminder-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }
    .reminder-list li {
        display: flex;
        align-items: center;
        padding: 12px 0;
        border-bottom: 1px dashed #eee;
        font-size: 1.1rem;
        color: #555;
    }
    .reminder-list li:last-child {
        border-bottom: none;
    }
    .reminder-icon {
        color: #e67e22;
        margin-right: 15px;
        font-size: 1.2rem;
    }

    /* Footer Styling */
    footer {
        background-color: #333;
        color: #ddd;
        text-align: center;
        padding: 15px 0;
        font-size: 0.9rem;
        margin-top: auto; /* Push to the bottom */
    }

    /* Chart Responsiveness */
    #glucoseChart {
        max-height: 400px; /* Limit chart height */
        width: 100% !important;
        height: auto !important;
    }

    /* Media query for smaller screens */
    @media (max-width: 768px) {
        .header { padding: 10px 15px; }
        .header nav ul { display: none; } /* Hide full navigation on mobile */
        .container { padding: 15px; }
    }
</style>
<body>
  <!-- üåü Header -->
  <header class="header">
    <div class="logo"><i class="fa-solid fa-heartbeat"></i> CareConnect</div>
    <nav>
      <ul>
        <li><a href="{{ url_for('home') }}"><i class="fa-solid fa-house"></i> Home</a></li>
        <li><a href="{{ url_for('dashboard') }}"><i class="fa-solid fa-chart-line"></i> Dashboard</a></li>
        <li><a href="{{ url_for('healthplan') }}"><i class="fa-solid fa-bowl-food"></i> Health Plan</a></li>
        <li><a href="{{ url_for('progress') }}"><i class="fa-solid fa-chart-pie"></i> Progress</a></li>
        <li><a href="{{ url_for('alerts') }}"><i class="fa-solid fa-bell"></i> Alerts</a></li>
        <li><a href="{{ url_for('doctorconnect') }}"><i class="fa-solid fa-user-doctor"></i> Doctor Connect</a></li>
        <li><a href="{{ url_for('logout') }}"><i class="fa-solid fa-right-from-bracket"></i> Logout</a></li>
      </ul>
    </nav>
  </header>

  <div class="container">
    <h1 style="font-weight:bold; color:#333;">Welcome to Your Diabetes Health Dashboard</h1>

    <!-- üîó Quick Links -->
    <div class="card">
      <h2 style="color:#0078D7;">Quick Links</h2>
      <div style="display:flex; justify-content:center; gap:15px; flex-wrap:wrap;">
        <button onclick="window.location.href='premium'" class="quick-btn">üß† Prediction</button>
        <button onclick="window.location.href='healthplan'" class="quick-btn">üíä Health Plan</button>
        <button onclick="window.location.href='doctorconnect'" class="quick-btn">üë®‚Äç‚öïÔ∏è Doctor Contact</button>
      </div>
    </div>

    <!-- ü©∏ Glucose Tracking Graph -->
    <div class="card" id="tracking">
      <h2 style="color:#026ab4 ;"> Glucose Tracking Chart</h2>
      <p style="text-align:center;">Your glucose level trend over time (mg/dL)</p>
      <canvas id="glucoseChart" ></canvas>
      <p id="noDataMsg" style="text-align:center; color:red; display:none;">No glucose readings available yet. Make a prediction to see your chart.</p>
    </div>
  </div>
  <br>

  <footer>
    <p>&copy; 2025 CareConnect | Stay Healthy, Stay Safe</p>
  </footer>

  <!-- üìä ChartJS Script -->
  <script>
    // Data passed from Flask (in your app.py dashboard route)
    const labels = JSON.parse('{{ dates | default([]) | tojson | safe }}');
    const dataPoints = JSON.parse('{{ glucose_values | default([]) | tojson | safe }}');

    const ctx = document.getElementById('glucoseChart').getContext('2d');

    if (!dataPoints || dataPoints.length === 0) {
      document.getElementById('noDataMsg').style.display = 'block';
    } else {
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: labels,
          datasets: [{
            label: 'Glucose Level (mg/dL)',
            data: dataPoints,
            borderColor: '#0078D7',
            backgroundColor: 'rgba(0, 120, 215, 0.15)',
            fill: true,
            borderWidth: 2,
            pointRadius: 4,
            tension: 0.3
          }]
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: true, position: 'bottom' }
          },
          scales: {
            x: { title: { display: true, text: 'Date' } },
            y: { title: { display: true, text: 'Glucose (mg/dL)' } }
          }
        }
      });
    }
  </script>

  <style>
    .quick-btn {
      width: 30%;
      text-align: center;
      border: none;
      border-radius: 8px;
      background-color: #0078D7;
      color: white;
      cursor: pointer;
      padding: 10px;
      font-size: 16px;
      transition: background 0.2s ease;
    }
    .quick-btn:hover {
      background-color: #005ea0;
    }
    
  </style>
</body>
</html>
